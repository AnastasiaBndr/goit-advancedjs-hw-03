{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nconst searchParams = new URLSearchParams({\n\timage_type: 'photo',\n\torientation: 'horizontal',\n\tsafesearch: true,\n});\nconst url = `https://pixabay.com/api/?key=38590711-cd4e1138b2603dfebaf6d7de9&`;\n\nexport function pixabayApi(inputValue) {\n\tif (inputValue.length === 0) {\n\t\treturn Promise.reject(\"Sorry, there are no images matching your search query. Please try again!\")\n\t}\n\n\tsearchParams.append(\"q\", inputValue.trim().toLowerCase());\n\treturn fetch(url + searchParams.toString()).then((response) => {\n\t\tif (!response.ok) {\n\t\t\tthrow new Error(response.status);\n\t\t}                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    \n\t\treturn response.json();\n\t})\n\t.catch((err) => {\n\t\t\tiziToast.error({\n\t\t\t\tmessage: `${err}`,\n\t\t\t\tcloseOnClick: true,\n\t\t\t\tposition: \"topRight\",\n\t\t\t\tdisplayMode: 0,\n\t\t\t\tprogressBar: false,\n\t\t\t});\n\t\t})\n}\n\n","export function renderFunction(posts) {\n    const markup = posts.map(({ comments, downloads, likes,\n        largeImageURL, previewURL, previewWidth, views }) => {\n\n        return `<li class=\"gallery-item\">\n                    <a class=\"gallery-link\" href=\"${largeImageURL}\">\n                    <img\n                        class=\"gallery-image\"\n                        src=\"${previewURL}\"\n                        alt=\"image\"\n                        />\n                    </a>\n                    <div class=\"image-descriptions-container\">\n                        <div class=\"small-descriptions-container\">\n                            <p>Likes</p>\n                            <p>${likes}</p>\n                        </div>\n                        <div class=\"small-descriptions-container\">\n                            <p>Views</p>\n                            <p>${views}</p>\n                        </div>\n                        <div class=\"small-descriptions-container\">\n                            <p>Comments</p>\n                            <p>${comments}</p>\n                        </div>\n                        <div class=\"small-descriptions-container\">\n                            <p>Downloads</p>\n                            <p>${downloads}</p>\n                        </div>\n                    </div>\n                    </li>\n    `\n    })\n\n    return markup.join(\"\");\n\n}\n\n","import { pixabayApi } from \"./js/pixabay-api\";\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport { renderFunction } from \"./js/render-functions\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nconst submitForm = document.querySelector('form');\nconst gallery = document.querySelector('.gallery');\nconst input = document.querySelector('input[type=\"text\"]');\nconst loader = document.querySelector('.loader');\n\nlet lightbox;\n\nconst handleSubmit = async (e) => {\n    e.preventDefault();\n    gallery.innerHTML = \"\";\n    loader.classList.add('visible');\n\n    if (lightbox) {\n        lightbox.refresh();\n    }\n    \n    setTimeout(function () {\n        pixabayApi(input.value).then(posts => {\n            if (posts.hits.length === 0) \n                throw new Error(\"Sorry, there are no images matching your search query. Please try again!\");\n            \n            gallery.innerHTML = renderFunction(posts.hits);\n\n            lightbox = new SimpleLightbox('.gallery a', {\n                captions: true,\n                captionsData: 'alt',\n                captionSelector: 'img',\n                captionPosition: 'outside',\n                captionDelay: 250,\n                overlayOpacity: 0.8,\n                styles: '../css/styles.css',\n            }\n            )\n        }).catch((err) => iziToast.error({\n            message: `${err.message ? err.message : err}`,\n            closeOnClick: true,\n            position: \"topRight\",\n            displayMode: 0,\n            progressBar: false,\n            backgroundColor: '#EF4040',\n            messageColor: 'white',\n            iconColor: 'white',\n            maxWidth: '432px',\n        })).finally(loader.classList.remove('visible'))\n    }, 1000);\n    \n            \n    \n};\n\nsubmitForm.addEventListener('submit', handleSubmit);\n"],"names":["searchParams","url","pixabayApi","inputValue","response","err","iziToast","renderFunction","posts","comments","downloads","likes","largeImageURL","previewURL","previewWidth","views","submitForm","gallery","input","loader","lightbox","handleSubmit","e","SimpleLightbox"],"mappings":"6vBAGA,MAAMA,EAAe,IAAI,gBAAgB,CACxC,WAAY,QACZ,YAAa,aACb,WAAY,EACb,CAAC,EACKC,EAAM,mEAEL,SAASC,EAAWC,EAAY,CACtC,OAAIA,EAAW,SAAW,EAClB,QAAQ,OAAO,0EAA0E,GAGjGH,EAAa,OAAO,IAAKG,EAAW,KAAI,EAAG,aAAa,EACjD,MAAMF,EAAMD,EAAa,SAAQ,CAAE,EAAE,KAAMI,GAAa,CAC9D,GAAI,CAACA,EAAS,GACb,MAAM,IAAI,MAAMA,EAAS,MAAM,EAEhC,OAAOA,EAAS,KAAM,CACtB,CAAA,EACA,MAAOC,GAAQ,CACdC,EAAS,MAAM,CACd,QAAS,GAAGD,CAAG,GACf,aAAc,GACd,SAAU,WACV,YAAa,EACb,YAAa,EACjB,CAAI,CACD,CAAA,EACH,CC/BO,SAASE,EAAeC,EAAO,CAkClC,OAjCeA,EAAM,IAAI,CAAC,CAAE,SAAAC,EAAU,UAAAC,EAAW,MAAAC,EAC7C,cAAAC,EAAe,WAAAC,EAAY,aAAAC,EAAc,MAAAC,KAElC;AAAA,oDACqCH,CAAa;AAAA;AAAA;AAAA,+BAGlCC,CAAU;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iCAORF,CAAK;AAAA;AAAA;AAAA;AAAA,iCAILI,CAAK;AAAA;AAAA;AAAA;AAAA,iCAILN,CAAQ;AAAA;AAAA;AAAA;AAAA,iCAIRC,CAAS;AAAA;AAAA;AAAA;AAAA,KAKrC,EAEa,KAAK,EAAE,CAEzB,CC7BA,MAAMM,EAAa,SAAS,cAAc,MAAM,EAC1CC,EAAU,SAAS,cAAc,UAAU,EAC3CC,EAAQ,SAAS,cAAc,oBAAoB,EACnDC,EAAS,SAAS,cAAc,SAAS,EAE/C,IAAIC,EAEJ,MAAMC,EAAe,MAAOC,GAAM,CAC9BA,EAAE,eAAgB,EAClBL,EAAQ,UAAY,GACpBE,EAAO,UAAU,IAAI,SAAS,EAE1BC,GACAA,EAAS,QAAS,EAGtB,WAAW,UAAY,CACnBlB,EAAWgB,EAAM,KAAK,EAAE,KAAKV,GAAS,CAClC,GAAIA,EAAM,KAAK,SAAW,EACtB,MAAM,IAAI,MAAM,0EAA0E,EAE9FS,EAAQ,UAAYV,EAAeC,EAAM,IAAI,EAE7CY,EAAW,IAAIG,EAAe,aAAc,CACxC,SAAU,GACV,aAAc,MACd,gBAAiB,MACjB,gBAAiB,UACjB,aAAc,IACd,eAAgB,GAChB,OAAQ,mBACxB,CACA,CACS,CAAA,EAAE,MAAOlB,GAAQC,EAAS,MAAM,CAC7B,QAAS,GAAGD,EAAI,QAAUA,EAAI,QAAUA,CAAG,GAC3C,aAAc,GACd,SAAU,WACV,YAAa,EACb,YAAa,GACb,gBAAiB,UACjB,aAAc,QACd,UAAW,QACX,SAAU,OACtB,CAAS,CAAC,EAAE,QAAQc,EAAO,UAAU,OAAO,SAAS,CAAC,CACjD,EAAE,GAAI,CAIX,EAEAH,EAAW,iBAAiB,SAAUK,CAAY"}